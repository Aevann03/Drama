{% block title %}
	<title>Create a post - {{'SITE_NAME' | app_config}}</title>
{% endblock %}

{% extends "default.html" %}

{% block subHeader %}
	<div class="container mx-auto px-4 py-4 grid grid-cols-12 rounded-t-md bg-gradient-to-t from-gray-800 to-gray-700 sub-header-shadow">
		<div class="col-span-full flex items-center">
			<div>
				<h1 class="font-bold text-xl font-heading leading-normal">
					Create a post
				</h1>
				<small class="block mt-1 text-gray-400">
					Share text, hyperlinks, or image macros with the community.
				</small>
			</div>
		</div>
	</div>
{% endblock %}

{% block content %}
<div class="col-span-full xl:col-span-9">
	<form id="submitform" action="/submit" method="post" enctype="multipart/form-data" class="flex flex-col space-y-6 sm:py-4 my-2.5 sm:my-0">

		<!-- Post title field section -->
		<div class="flex flex-col">
			<label for="post-title" class="font-bold text-lg font-heading leading-normal mb-2">Title</label>
			<div>
				<!-- Input field -->
				<input class="rounded shadow-inner w-full px-2 py-1.5 text-gray-700 bg-gray-900 border border-gray-900 focus:bg-white focus:text-gray-900" id="post-title" aria-describedby="titleHelpRegister" type="text" name="title" placeholder="rdrama.net is one of the most malevolent, cruel, coldhearted online communities you'll ever find" value="{{title}}" minlength="1" maxlength="500" required oninput="checkForRequired()">
				<!-- Add emoji button -->
				<button type="button" class="mt-1 text-sm text-gray-500 hover:text-gray-200" onclick="loadEmojis('post-title')" aria-hidden="true" data-bs-toggle="modal" data-bs-target="#emojiModal" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Add Emoji">
					Add emoji
				</button>
			</div>
		</div>

		<!-- Link field section -->
		<div class="flex flex-col">
			<label for="post-URL" class="font-bold text-lg font-heading leading-normal mb-2">
				Link
				<span class="italic text-sm font-normal text-gray-500">(optional if you have text)</span>
			</label>
			<div>
				<!-- Input field -->
				<input class="rounded shadow-inner w-full px-2 py-1.5 text-gray-700 bg-gray-900 border border-gray-900 focus:bg-white focus:text-gray-900" id="post-URL" aria-describedby="URLHelp" name="url" placeholder="https://www.youtube.com/watch?v=iik25wqIuFo" value="{{request.values.get('url','')}}" required oninput="checkForRequired();autoSuggestTitle();hide_image()">
				<small class="block mt-1 text-gray-400">
					To post an image, use a direct image link such as i.imgur.com
				</small>
			</div>
		</div>

		<!-- Attachment field section -->
		<div class="flex flex-col">
			<label for="post-URL" class="font-bold text-lg font-heading leading-normal mb-2">
				Image or Video
				<span class="italic text-sm font-normal text-gray-500">(optional)</span>
			</label>
			<div>
				<!-- Input field -->
				<label class="inline-block px-4 py-2 bg-gradient-to-t from-gray-700 to-gray-600 hover:from-red-600 hover:to-red-700 active:shadow-inner border border-gray-800 rounded-lg text-shadow-t shadow-inset-t-white-10 text-sm font-bold text-gray-200 focus:text-gray-400 focus:outline-none" for="file-upload">
					<i class="fas fa-file fa-fw fa-sm mr-1"></i>
					<span id="filename-show">Select file</span>
					<input id="file-upload" type="file" name="file" accept="image/*, video/*" hidden>
				</label>
				<small class="block mt-1 text-gray-400">
					You may upload videos up to 1 minute long.
				</small>
			</div>
		</div>

		<!-- Link field section -->
		<div class="flex flex-col">
			<label for="post-URL" class="font-bold text-lg font-heading leading-normal mb-2">
				Post
				<span class="italic text-sm font-normal text-gray-500">(optional if you have a link)</span>
			</label>
			<!-- Input field -->
			<div class="comment-box rounded-lg border border-gray-900 bg-gray-700 bg-opacity-40 hover:bg-opacity-100 focus:bg-opacity-100 shadow-inner w-full">
				<textarea form="submitform" id="post-text" class="w-full rounded-t-md p-3 text-gray-900 bg-transparent focus:bg-white shadow-inner resize-y focus:outline-none" aria-label="With textarea" placeholder="Optional if you have a link or an image." rows="6" name="body" oninput="markdown();charLimit('post-text','character-count-submit-text-form');checkForRequired()" maxlength="10000" required></textarea>
				<ul class="-mt-1 flex space-x-4 px-3 py-2 border-t border-dashed border-white border-opacity-10">
					<li>
						<button type="button" class="text-gray-500 hover:text-gray-400" onclick="makeBold('post-text')">
							<i class="fas fa-bold fa-fw fa-sm" data-bs-toggle="tooltip" data-bs-placement="bottom"  title="" data-bs-original-title="Bold"></i>
						</button>
					</li>
					<li>
						<button type="button" class="text-gray-500 hover:text-gray-400" onclick="makeItalics('post-text')">
							<i class="fas fa-italic fa-fw fa-sm" data-bs-toggle="tooltip" data-bs-placement="bottom"  title="" data-bs-original-title="Italicize"></i>
						</button>
					</li>
					<li>
						<button type="button" class="text-gray-500 hover:text-gray-400" onclick="makeQuote('post-text')">
							<i class="fas fa-quote-right fa-fw fa-sm" data-bs-toggle="tooltip" data-bs-placement="bottom"  title="" data-bs-original-title="Quote"></i>
						</button>
					</li>
					<li>
						<button type="button" class="text-gray-500 hover:text-gray-400" onclick="commentForm('post-text');getGif()">
							<span class="font-bold text-sm text-uppercase" aria-hidden="true" data-bs-toggle="modal" data-bs-target="#gifModal" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Add GIF">GIF</span>
						</button>
					</li>
					<li>
						<button type="button" class="text-gray-500 hover:text-gray-400" onclick="loadEmojis('post-text')" aria-hidden="true" data-bs-toggle="modal" data-bs-target="#emojiModal" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Add Emoji">	<i class="fas fa-smile-beam fa-fw fa-sm"></i>
						</button>
					</li>
				</ul>
			</div>
		</div>

		<!-- Image preview -->
		<img loading="lazy" id="image-preview" class="shadow-md p-1 bg-white border border-gray-900 w-72"/>

				<div class="row justify-content-center mb-5">

						<div class="col p-3 py-md-0">

								<div class="body">

										<input type="hidden" name="formkey" value="{{v.formkey}}">

										<label for="title">Post Title</label>


										<input class="form-control" id="post-title" aria-describedby="titleHelpRegister" type="text" name="title" placeholder="Required" value="{{title}}" minlength="1" maxlength="500" required oninput="checkForRequired()">

										<label class="btn btn-secondary format d-inline-block m-0" for="emoji-reply-btn-2">
											<div id="emoji-reply-btn-2" onclick="loadEmojis('post-title')" aria-hidden="true" data-bs-toggle="modal" data-bs-target="#emojiModal" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Add Emoji"><i class="fas fa-smile-beam"></i></div>
										</label>

										<div id="urlblock">
												<label for="URL" class="mt-3">URL</label>
												<input class="form-control" id="post-URL" aria-describedby="URLHelp" name="url" placeholder="Optional if you have text." value="{{request.values.get('url','')}}" required oninput="checkForRequired();autoSuggestTitle();hide_image()">
												<small class="form-text text-muted">To post an image, use a direct image link such as i.imgur.com</small>
										</div>

										<div id="image-upload-block">
											<div><label class="mt-3">Attachment Upload</label></div>

											<img loading="lazy" id="image-preview" class="w-100">
											<label class="btn btn-secondary m-0" for="file-upload">
												<div id="filename-show">Select File</div>
												<input id="file-upload" type="file" name="file" accept="image/*, video/*" hidden>
											</label>
											<small class="form-text text-muted">Optional if you have text.</small>
											<small class="form-text text-muted">You can upload videos up to 1 minute long.</small>
										</div>
										</div>

										<label for="body" class="mt-3">Text<i class="fas fa-info-circle text-gray-400 ml-1" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Uses markdown. Limited to 10000 characters."></i></label>

										<div>
											<textarea form="submitform" id="post-text" class="form-control rounded" aria-label="With textarea" placeholder="Optional if you have a link or an image." rows="7" name="body" oninput="markdown();charLimit('post-text','character-count-submit-text-form');checkForRequired()" maxlength="10000" required></textarea>

											<div class="btn btn-secondary" onclick="document.getElementById('preview').classList.toggle('d-none');" style="float: right;">
												Toggle preview
											</div>
											<div id="preview" class="my-3"></div>

											<span class="position-absolute text-small font-weight-bold" id="character-count-submit-text-form" style="right: 1rem; bottom: 0.5rem; z-index: 3;"></span>
										</div>

										<p></p>
										<small class="btn btn-secondary format d-inline-block m-0">
										<i class="fas fa-bold" aria-hidden="true" onclick="makeBold('post-text')" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Bold"></i>
										</small>
										&nbsp; 
										<small class="btn btn-secondary format d-inline-block m-0">
										<i class="fas fa-italic" aria-hidden="true" onclick="makeItalics('post-text')" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Italicize"></i>
										</small>
										&nbsp; 
										<small class="btn btn-secondary format d-inline-block m-0">
										<i class="fas fa-quote-right" aria-hidden="true" onclick="makeQuote('post-text')" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Quote"></i>
										</small>
										&nbsp;
										<small class="btn btn-secondary format d-inline-block m-0"><span class="font-weight-bolder text-uppercase" aria-hidden="true" onclick="getGif();commentForm('post-text')" data-bs-toggle="modal" data-bs-target="#gifModal" data-bs-toggle="tooltip" data-bs-placement="bottom"  title="" data-bs-original-title="Add GIF">GIF</span></small>
										&nbsp;
										<label class="btn btn-secondary format d-inline-block m-0" for="emoji-reply-btn">
											<div id="emoji-reply-btn" onclick="loadEmojis('post-text')" aria-hidden="true" data-bs-toggle="modal" data-bs-target="#emojiModal" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="Add Emoji"><i class="fas fa-smile-beam"></i></div>
										</label>
																					
										<pre></pre>
										<div class="form-text text-small"><a href="/formatting" target="_blank">Formatting help</a></div>
										<pre></pre>

										<div class="custom-control custom-checkbox">
												<input type="checkbox" class="custom-control-input" id="nsfwCheck" name="over_18">
												<label class="custom-control-label" for="nsfwCheck">+18</label>
										</div>
										<div class="custom-control custom-checkbox">
												<input type="checkbox" class="custom-control-input" id="privateCheck" name="private">
												<label class="custom-control-label" for="privateCheck">Draft</label>
										</div>

										{% if v.admin_level == 6 or (v.coins >= 750 and not v.club_banned) %}
											<div class="custom-control custom-checkbox">
												<input type="checkbox" class="custom-control-input" id="clubCheck" name="club">
												<label class="custom-control-label" for="clubCheck">Country Club thread</label>
											</div>
										{% endif %}
										<pre>






										</pre>
								</div>

						</div>

		<div class="container">
				<div class="row fixed-bottom bg-white border-top p-3" id="" style="z-index: 100; bottom: 0px; transition: bottom 220ms cubic-bezier(0, 0, 0.2, 1) 0s;">
						<div class="col">
								<a href="/" class="btn btn-secondary">Cancel</a>
						</div>
						<div class="col text-right">
								{% if error %}<span class="text-danger mr-2">{{error}}</span>{% endif %}
								<button class="btn btn-outline-purple" id="create_button" type="submit" disabled>Post</button>
						</div>
				</div>
		</div>

	</form>
</div>
{% endblock %}

{% block sidebar %}
<div>test</div>
{% endblock %}

{% block modals %}
	{% include "emoji_modal.html" %}
	{% include "gif_modal.html" %}
{% endblock %}

{% block scripts %}
<script src="/assets/js/submit.js?v=64"></script>
{% endblock %}